<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>海外ウェディング持ち物チェックリスト</title>
  <style>
    body {
      font-family: "Hiragino Sans", "Arial", sans-serif;
      background: #fdfdfd;
      color: #333;
      margin: 20px;
      line-height: 1.6;
    }
    h1 {
      text-align: center;
      margin-bottom: 1em;
      color: #444;
    }
    h2 {
      margin-top: 2em;
      color: #555;
    }
    .checklist {
      border-collapse: collapse;
      width: 100%;
      margin-bottom: 2em;
    }
    .checklist th, .checklist td {
      border: 1px solid #ddd;
      padding: 8px;
      vertical-align: top;
    }
    .checklist th {
      background: #f5f5f5;
    }
    .checked {
      text-decoration: line-through;
      color: #888;
    }
  </style>
</head>
<body>
  <h1>海外ウェディング持ち物チェックリスト</h1>

  <h2>あると便利 / 預け荷物</h2>
  <table class="checklist" id="baggageList"></table>

  <h2>手荷物</h2>
  <table class="checklist" id="handList"></table>

  <h2>みくりく貸します！！</h2>
  <ul id="lendList"></ul>

  <script>
    const baggage = [
      { item: "ウェットティッシュ" },
      { item: "サングラス" },
      { item: "帽子" },
      { item: "サンダル" },
      { item: "大きめのエコバック", note: "紙袋も有料です！" },
      { item: "洗濯ネット", note: "ホテルで洗濯するなら" },
      { item: "さとうのご飯", note: "ポキ丼のご飯は微妙なので単品買いがおすすめ" },
      { item: "ジップロック数枚", note: "お土産の液体物を入れる" },
      { item: "薄手の羽織の替え", note: "室内寒く屋外暑い" },
      { item: "ハンガー", note: "シワになる洋服用" },
      { item: "綿棒(耳かき)" },
      { item: "ボディークリーム", note: "水が違うので乾燥しやすい" },
    ];

    const hand = [
      { item: "アイマスク" },
      { item: "マスク" },
      { item: "着圧ソックス" },
      { item: "のど飴" },
      { item: "酔い止め(必要なら)" },
      { item: "充電コード", note: "機内充電できるので取り出しやすく" },
      { item: "はぶらし" },
      { item: "パスポートのコピー", note: "無くした時用" },
      { item: "日焼け止め" },
      { item: "ネックピロー" },
      { item: "スリッパ or サンダル" },
      { item: "ペン", note: "帰りだけ申告書を書く（電子なら不要）" },
      { item: "薄手の羽織", note: "機内寒い" },
      { item: "空の水筒", note: "預け荷物でもOK" },
      { item: "顔の保湿アイテム", note: "機内乾燥対策" },
      { item: "水", note: "手荷物検査後に買う or 給水機で補充" },
    ];

    const lend = [
      "スーツケース測り",
      "ロキソニン",
      "食器洗うスポンジ",
      "ビオフェルミン",
      "休足時間"
    ];

    // ---- チェックリスト描画関数 ----
    function renderChecklist(list, elementId, storageKey) {
      const table = document.getElementById(elementId);
      let html = "<tr><th>✅</th><th>項目</th><th>概要</th></tr>";

      // 保存済みのチェック状態を取得
      const saved = JSON.parse(localStorage.getItem(storageKey) || "{}");

      list.forEach((obj, i) => {
        const checked = saved[i] ? "checked" : "";
        const checkedClass = saved[i] ? "checked" : "";

        html += `
          <tr>
            <td><input type="checkbox" id="${elementId}-${i}" ${checked}></td>
            <td id="label-${elementId}-${i}" class="${checkedClass}">${obj.item}</td>
            <td>${obj.note || ""}</td>
          </tr>
        `;
      });
      table.innerHTML = html;

      // チェック操作イベント
      list.forEach((_, i) => {
        const checkbox = document.getElementById(`${elementId}-${i}`);
        const label = document.getElementById(`label-${elementId}-${i}`);

        checkbox.addEventListener("change", () => {
          label.classList.toggle("checked", checkbox.checked);

          // localStorage に保存
          const current = JSON.parse(localStorage.getItem(storageKey) || "{}");
          current[i] = checkbox.checked;
          localStorage.setItem(storageKey, JSON.stringify(current));
        });
      });
    }

    // ---- 貸出リスト描画関数 ----
    function renderLendList(list, elementId) {
      const ul = document.getElementById(elementId);
      list.forEach(item => {
        const li = document.createElement("li");
        li.textContent = item;
        ul.appendChild(li);
      });
    }

    // ---- 実行 ----
    renderChecklist(baggage, "baggageList", "baggageChecks");
    renderChecklist(hand, "handList", "handChecks");
    renderLendList(lend, "lendList");
  </script>
</body>
</html>
